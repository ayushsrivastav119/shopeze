# ACDL Data Flow Diagram - Shopeze

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Shopeze E-Commerce Site                          â”‚
â”‚                    (All HTML Pages)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        window.adobeDataLayer = window.adobeDataLayer || []          â”‚
â”‚              (Bootstrap in <head> of every page)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         app.js                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ACDL Event Helpers (6 functions)                            â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚
â”‚  â”‚ â”‚ 1. firePageLoaded()        â†’ event: "pageLoaded"        â”‚â”‚  â”‚
â”‚  â”‚ â”‚ 2. fireLinkClicked(...)    â†’ event: "linkClicked"       â”‚â”‚  â”‚
â”‚  â”‚ â”‚ 3. fireAddToCart(...)      â†’ event: "addToCart"         â”‚â”‚  â”‚
â”‚  â”‚ â”‚ 4. fireRemoveFromCart(...) â†’ event: "removeFromCart"    â”‚â”‚  â”‚
â”‚  â”‚ â”‚ 5. fireBeginCheckout(...)  â†’ event: "beginCheckout"     â”‚â”‚  â”‚
â”‚  â”‚ â”‚ 6. firePurchase(...)       â†’ event: "purchase"          â”‚â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              window.adobeDataLayer (Array)                          â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [0] { event: "pageLoaded", xdmPageLoad: {...} }            â”‚   â”‚
â”‚  â”‚ [1] { event: "linkClicked", xdmActionDetails: {...} }      â”‚   â”‚
â”‚  â”‚ [2] { event: "addToCart", xdmCommerce: {...} }             â”‚   â”‚
â”‚  â”‚ [3] { event: "linkClicked", xdmActionDetails: {...} }      â”‚   â”‚
â”‚  â”‚ [4] { event: "removeFromCart", xdmCommerce: {...} }        â”‚   â”‚
â”‚  â”‚ [5] { event: "beginCheckout", xdmCommerce: {...} }         â”‚   â”‚
â”‚  â”‚ ... and so on                                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Adobe Launch (Tag Manager)                             â”‚
â”‚   <script src="https://assets.adobedtm.com/...">                   â”‚
â”‚                                                                     â”‚
â”‚  Listens to adobeDataLayer.push() events and:                      â”‚
â”‚  â€¢ Maps to Adobe Analytics                                         â”‚
â”‚  â€¢ Sends to RTCDP                                                  â”‚
â”‚  â€¢ Triggers CJA events                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚                  â”‚                                   â”‚
â†“              â†“                  â†“                                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Analytics â”‚ â”‚  RTCDP        â”‚ â”‚  CJA         â”‚ â”‚  Other Tools   â”‚
â”‚            â”‚ â”‚  (Activation) â”‚ â”‚  (Analysis)  â”‚ â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## User Journey Event Flow

### ğŸ  Home â†’ ğŸ“¦ Products â†’ ğŸ›ï¸ Product â†’ ğŸ›’ Cart â†’ âœ… Checkout â†’ ğŸ’° Payment â†’ âœ… Confirmation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. HOME PAGE (index.html, data-page="home")                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Page Load (DOMContentLoaded)                                          â”‚
â”‚      â†“                                                                  â”‚
â”‚  firePageLoaded()                                                      â”‚
â”‚      â†“                                                                  â”‚
â”‚  push { event: "pageLoaded", pageName: "home", ... }                  â”‚
â”‚      â†“                                                                  â”‚
â”‚  Event Listeners on:                                                   â”‚
â”‚    â€¢ Nav links â†’ fireLinkClicked("Home", "nav", "header")             â”‚
â”‚    â€¢ CTA buttons â†’ fireLinkClicked("Shop Products", "cta", "hero") â”‚
â”‚    â€¢ Footer links â†’ fireLinkClicked(link, "footer", "footer")        â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. PRODUCTS PAGE (plp.html, data-page="plp")                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Page Load                                                             â”‚
â”‚      â†“                                                                  â”‚
â”‚  firePageLoaded()                                                      â”‚
â”‚      â†“                                                                  â”‚
â”‚  push { event: "pageLoaded", pageName: "products", ... }              â”‚
â”‚      â†“                                                                  â”‚
â”‚  User Action 1: Click "View" on product card                          â”‚
â”‚      â†“                                                                  â”‚
â”‚  fireLinkClicked("View Product: Classic White Tee", "card", "tile-1") â”‚
â”‚      â†“                                                                  â”‚
â”‚  User Action 2: Click "Add" quick button                              â”‚
â”‚      â†“                                                                  â”‚
â”‚  fireAddToCart(product, 1)                                            â”‚
â”‚      â†“                                                                  â”‚
â”‚  push { event: "addToCart", xdmCommerce: {...} }                      â”‚
â”‚      â†“                                                                  â”‚
â”‚  "Added to cart" alert + cart count updates                           â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. PRODUCT DETAIL PAGE (pdp.html, data-page="pdp")                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Page Load                                                             â”‚
â”‚      â†“                                                                  â”‚
â”‚  firePageLoaded()                                                      â”‚
â”‚      â†“                                                                  â”‚
â”‚  push { event: "pageLoaded", pageName: "product-detail", ... }        â”‚
â”‚      â†“                                                                  â”‚
â”‚  User Action: Click "Add to cart" button                              â”‚
â”‚      â†“                                                                  â”‚
â”‚  fireAddToCart(product, quantity)                                     â”‚
â”‚      â†“                                                                  â”‚
â”‚  push { event: "addToCart", xdmCommerce: {...} }                      â”‚
â”‚      â†“                                                                  â”‚
â”‚  window.location = "cart.html"                                        â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. CART PAGE (cart.html, data-page="cart")                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Page Load                                                             â”‚
â”‚      â†“                                                                  â”‚
â”‚  firePageLoaded()                                                      â”‚
â”‚      â†“                                                                  â”‚
â”‚  push { event: "pageLoaded", pageName: "cart", ... }                  â”‚
â”‚      â†“                                                                  â”‚
â”‚  renderCart() - Display cart items with remove buttons                â”‚
â”‚      â†“                                                                  â”‚
â”‚  [User Actions]                                                        â”‚
â”‚  â”œâ”€ Remove item?                                                      â”‚
â”‚  â”‚    â†“                                                                â”‚
â”‚  â”‚    fireRemoveFromCart(item, qty)                                   â”‚
â”‚  â”‚    â†“                                                                â”‚
â”‚  â”‚    push { event: "removeFromCart", xdmCommerce: {...} }            â”‚
â”‚  â”‚    â†“                                                                â”‚
â”‚  â”‚    Remove from localStorage & renderCart()                         â”‚
â”‚  â”‚                                                                    â”‚
â”‚  â””â”€ Click "Proceed to Checkout"?                                     â”‚
â”‚       â†“                                                                â”‚
â”‚       fireBeginCheckout(cart)                                         â”‚
â”‚       â†“                                                                â”‚
â”‚       push { event: "beginCheckout", xdmCommerce: {...} }             â”‚
â”‚       â†“                                                                â”‚
â”‚       window.location = "checkout.html"                               â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. CHECKOUT PAGE (checkout.html, data-page="checkout")                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Page Load                                                             â”‚
â”‚      â†“                                                                  â”‚
â”‚  firePageLoaded()                                                      â”‚
â”‚      â†“                                                                  â”‚
â”‚  push { event: "pageLoaded", pageName: "checkout", ... }              â”‚
â”‚      â†“                                                                  â”‚
â”‚  User fills form and submits                                          â”‚
â”‚      â†“                                                                  â”‚
â”‚  fireLinkClicked("Confirm Order", "cta", "checkout-confirm")         â”‚
â”‚      â†“                                                                  â”‚
â”‚  Create order object                                                   â”‚
â”‚      â†“                                                                  â”‚
â”‚  sessionStorage.setItem(ORDER_KEY, order_json)                        â”‚
â”‚      â†“                                                                  â”‚
â”‚  window.location = "payment-method.html"                              â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. PAYMENT METHOD PAGE (payment-method.html, data-page="payment-method")â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Page Load                                                             â”‚
â”‚      â†“                                                                  â”‚
â”‚  firePageLoaded()                                                      â”‚
â”‚      â†“                                                                  â”‚
â”‚  push { event: "pageLoaded", pageName: "payment-method", ... }        â”‚
â”‚      â†“                                                                  â”‚
â”‚  User selects payment method (e.g., Credit Card)                      â”‚
â”‚      â†“                                                                  â”‚
â”‚  fireLinkClicked("Select Payment: credit_card", "cta", "pay-option") â”‚
â”‚      â†“                                                                  â”‚
â”‚  window.location = "payment.html?orderid=..."                         â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. PAYMENT PAGE (payment.html, data-page="payment")                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Page Load                                                             â”‚
â”‚      â†“                                                                  â”‚
â”‚  firePageLoaded()                                                      â”‚
â”‚      â†“                                                                  â”‚
â”‚  push { event: "pageLoaded", pageName: "payment", ... }               â”‚
â”‚      â†“                                                                  â”‚
â”‚  User clicks "Confirm Payment"                                        â”‚
â”‚      â†“                                                                  â”‚
â”‚  window.location = "processing.html?orderid=..."                      â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 8. PROCESSING PAGE (processing.html, data-page="processing")           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Page Load                                                             â”‚
â”‚      â†“                                                                  â”‚
â”‚  firePageLoaded()                                                      â”‚
â”‚      â†“                                                                  â”‚
â”‚  push { event: "pageLoaded", pageName: "processing", ... }            â”‚
â”‚      â†“                                                                  â”‚
â”‚  setTimeout(1500ms) â†’ Simulate payment processing                      â”‚
â”‚      â†“                                                                  â”‚
â”‚  clearCart()                                                           â”‚
â”‚      â†“                                                                  â”‚
â”‚  window.location = "thankyou.html?orderid=..."                        â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 9. THANK YOU PAGE (thankyou.html, data-page="thankyou")                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Page Load                                                             â”‚
â”‚      â†“                                                                  â”‚
â”‚  firePageLoaded()                                                      â”‚
â”‚      â†“                                                                  â”‚
â”‚  push { event: "pageLoaded", pageName: "confirmation", ... }          â”‚
â”‚      â†“                                                                  â”‚
â”‚  firePurchase(order) â­ MAIN CONVERSION EVENT                          â”‚
â”‚      â†“                                                                  â”‚
â”‚  push {                                                                â”‚
â”‚    event: "purchase",                                                 â”‚
â”‚    xdmCommerce: {                                                     â”‚
â”‚      order: { orderID, totalValue, currency },                        â”‚
â”‚      products: [{ productID, name, price, qty }, ...]                 â”‚
â”‚    }                                                                   â”‚
â”‚  }                                                                     â”‚
â”‚      â†“                                                                  â”‚
â”‚  Display "Thank You" message with order details                       â”‚
â”‚      â†“                                                                  â”‚
â”‚  User clicks "Continue Shopping"                                      â”‚
â”‚      â†“                                                                  â”‚
â”‚  fireLinkClicked("Continue Shopping", "cta", "confirmation-action")  â”‚
â”‚      â†“                                                                  â”‚
â”‚  window.location = "plp.html"                                         â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Element Mappings

```
PRODUCTS Array
â”œâ”€â”€ ID              â†’ productID (e.g., "p-101")
â”œâ”€â”€ Title           â†’ productName (e.g., "Classic White Tee")
â”œâ”€â”€ Price           â†’ price (e.g., 299)
â”œâ”€â”€ Image URL       â†’ (not tracked)
â””â”€â”€ Description     â†’ (not tracked)

localStorage[CART_KEY]
â”œâ”€â”€ Cart Items
â”‚   â”œâ”€â”€ id, title, price, qty â†’ product in events
â”‚   â””â”€â”€ Aggregated totals â†’ totalQuantity, totalValue
â””â”€â”€ Used in: addToCart, removeFromCart, beginCheckout

sessionStorage[ORDER_KEY]
â”œâ”€â”€ Order Details
â”‚   â”œâ”€â”€ id           â†’ orderID (generated)
â”‚   â”œâ”€â”€ total        â†’ totalValue
â”‚   â”œâ”€â”€ items[]      â†’ products array in purchase
â”‚   â”œâ”€â”€ date         â†’ timestamp
â”‚   â”œâ”€â”€ name         â†’ (NOT tracked - PII policy)
â”‚   â”œâ”€â”€ email        â†’ (NOT tracked - PII policy)
â”‚   â””â”€â”€ address      â†’ (NOT tracked - PII policy)
â””â”€â”€ Used in: firePurchase()

Page Attributes
â”œâ”€â”€ body[data-page]  â†’ Identifies current page
â”œâ”€â”€ Maps to pageName, pageType, channel
â””â”€â”€ Used in: firePageLoaded(), fireLinkClicked()

User Clicks
â”œâ”€â”€ Button/Link text â†’ linkName
â”œâ”€â”€ Element context  â†’ linkType (nav, cta, footer, etc.)
â”œâ”€â”€ Page location    â†’ linkPosition (header, hero, footer, etc.)
â””â”€â”€ Used in: fireLinkClicked()
```

---

## Event Count by Page

| Page | pageLoaded | linkClicked | addToCart | removeFromCart | beginCheckout | purchase |
|------|:----------:|:-----------:|:---------:|:--------------:|:-------------:|:--------:|
| Home | 1 | 3-5 | - | - | - | - |
| PLP | 1 | 3-10 | 0-10 | - | - | - |
| PDP | 1 | 2-3 | 1 | - | - | - |
| Cart | 1 | 2-5 | - | 0-N | 1 | - |
| Checkout | 1 | 1-2 | - | - | - | - |
| Payment Method | 1 | 2-3 | - | - | - | - |
| Payment | 1 | 1 | - | - | - | - |
| Processing | 1 | - | - | - | - | - |
| Thank You | 1 | 1 | - | - | - | 1 |

**Total per session**: 8+ pageLoaded + 15+ linkClicked + 1+ addToCart + 1+ removeFromCart + 1 beginCheckout + 1 purchase

---

## Summary

âœ… **Clean separation** between events and business logic
âœ… **Real data** flows from actual product catalog and cart
âœ… **Standardized structure** compliant with XDM schema
âœ… **Automatic event firing** via DOMContentLoaded listeners
âœ… **No PII** in any event
âœ… **No hardcoded values** - all dynamic from site data
âœ… **Ready for Adobe ecosystem** (Analytics, RTCDP, CJA)
